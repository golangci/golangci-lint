<script defer src="https://cdn.jsdelivr.net/npm/quicklink@3.0.1/dist/quicklink.umd.js"></script>
<script>
  window.addEventListener('load', () => {
    quicklink.listen();
  });
</script>
<script>
  window.addEventListener('load', () => {
    const resetButton = document.querySelector('.gl-filter-reset');

    if (!resetButton) {
      return
    }

    const borderClass = 'hx:border'
    const hiddenClass = 'gl-hidden'

    document.querySelectorAll('.gl-filter').forEach(button => {
      button.addEventListener('click', event => {
        let clean = event.currentTarget.classList.contains(borderClass)

        document.querySelectorAll('.gl-item').forEach(element => element.classList.remove(hiddenClass));
        document.querySelectorAll('.gl-filter > *').forEach(element => element.classList.remove(borderClass));

        if (clean) {
          resetButton.classList.add(hiddenClass);
        } else {
          resetButton.classList.remove(hiddenClass);

          document.querySelectorAll('.gl-filter').forEach(element => element.classList.remove(borderClass))

          event.currentTarget.querySelector('*').classList.add(borderClass);

          let selector = ''
          switch (event.currentTarget.dataset.badge) {
            case 'default':
              selector = '.gl-item:not(.gl-default)'
              break;
            case 'new':
              selector = '.gl-item:not(.gl-new)'
              break;
            case 'autofix':
              selector = '.gl-item:not(.gl-autofix)'
              break;
            case 'fast':
              selector = '.gl-item:not(.gl-slow)'
              break;
            case 'slow':
              selector = '.gl-item:not(.gl-fast)'
              break;
            case 'deprecated':
              selector = '.gl-item:not(.gl-deprecated)'
              break;
          }

          if (selector) {
            document.querySelectorAll(selector).forEach(element => element.classList.add(hiddenClass));
          }
        }
      });
    });

    resetButton.addEventListener('click', (event) => {
      event.currentTarget.classList.add(hiddenClass);

      document.querySelectorAll('.gl-item').forEach(element => element.classList.remove(hiddenClass));
      document.querySelectorAll('.gl-filter > *').forEach(element => element.classList.remove(borderClass));
    });
  });
</script>
